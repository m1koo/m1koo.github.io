<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  
  <meta name="keywords" content="m1ko">
  <meta name="description" content="M1ko&#39;s Blog">
  
  <title>M1ko</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/materialize.min.css">
    
      <link rel="stylesheet" href="/css/Vateral.min.css">
    
  
  
    <style type="text/css">
        html{
            font-family: sans-serif;
            font-weight: 300;
        }
        @font-face {
            font-family: 'Material Icons';
            font-style: normal;
            font-weight: 400;
            src: url(/fonts/MaterialIcons-Regular.eot);
            src: url(/fonts/MaterialIcons-Regular.woff2) format('woff2'),
            url(/fonts/MaterialIcons-Regular.woff) format('woff'),
            url(/fonts/MaterialIcons-Regular.ttf) format('truetype')
        }
    </style>
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>
<body>
<div class="progress" >
    <div class="indeterminate"></div>
</div>
<a data-activates="slide-out"  class="button-collapse"><div class="nav-btn"><i class="material-icons">list</i></div></a>
<div id="menu-outer">
  <div id="menu-inner">
      <ul id="slide-out" class="side-nav" >
    <div class="nav-header"  style="background-image: url(/images/left.jpg)">
    <div class="header-box"><img src="/images/icon.jpg" ondragstart="return false;"></div>
    <p>Miko</p>
    <div class="nav-link">
        
        
        <a  href="https://github.com/m1koo" target="_blank"><div class="link-box github"></div></a>
        
        
        <a href="mailto:136057505@qq.com"><div class="link-box email"></div></a>
        
        
        <a href="http://weibo.com/u/5269244323/home?wvr=5&amp;uut=fin&amp;from=reg" target="_blank"><div class="link-box weibo"></div></a>
        
        
    </div>
    <div class="nav-search">
        <form id="search-form"> <!-- 搜索框相关 -->
            <input type="text" id="local-search-input" name="q" results="0" placeholder="搜索..." class="search form-control" autocomplete="off" autocorrect="off"/>
            <div class="nav-search-img"><i class="material-icons">search</i></div>
        </form>
        <div id="local-search-result"></div> <!-- 搜索结果区 -->
        <p class='no-result'>无搜索结果</p>
    </div>
</div>
    <!--Homepage-->

<li class="nav-list">
    <a href="/" target="_self">
        <div class="nav-ico"><i class="material-icons">home</i> </div><p>主页</p>
    </a>
</li>

<!--archives-->

<li class="nav-list dropdown-btn">
    <a  class=""  target="_self">
        <div class="nav-ico"><i class="material-icons">assignment</i></div><p>归档</p><div class="dropdown-ico"><i class="material-icons">arrow_drop_down</i></div>
    </a>
</li>

<ul class="dropdown-menu dropdown" >
    <li class="nav-dropdown-list">
        <a class="archive-link" href="/archives/2017/05/">五月 2017<span class="archive-count">11</span></a>
    </li>
</ul>
<!--categories-->

<li class="nav-list dropdown-btn">
    <a   class=""  target="_self">
        <div class="nav-ico"><i class="material-icons">dashboard</i></div><p>分类</p><div class="dropdown-ico"><i class="material-icons">arrow_drop_down</i></div>
    </a>
</li>

<ul class="dropdown-menu dropdown" >
    <li class="nav-dropdown-list">
        <a class="category-link" href="/categories/Android/">Android<span class="category-count">4</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/Hello/">Hello<span class="category-count">1</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/Java后台/">Java后台<span class="category-count">3</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/Lua/">Lua<span class="category-count">1</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/算法/">算法<span class="category-count">2</span></a>
    </li>
</ul>
<!--tags-->

<li class="nav-list">
    <a href="/archives" target="_self">
        <div class="nav-ico"><i class="material-icons">bookmark</i> </div><p>标签</p>
    </a>
</li>

<!--photo-->

<!--friends-->

<!--about-->


</ul>

  </div>
</div>

<div id="content-outer">
  <div id="content-inner">
    <article id="post">
  <div class="post-page-title" style="background-image:url(/images/a6.jpg)" >
  <h2> Android校园网登录客户端</h2>
    
  <p>作者:Miko &nbsp&nbsp 发布于:<time datetime="2017-05-02T03:41:30.000Z">
          2017-05-02
    </time>
  </p>
    
  </div>
  <div class="post-page-content">
  <p>大家好，我是M1ko。在互联网时代的今天，如果一个App不接入互联网，那么这个App一定不会有长时间的生命周期，因此Android网络编程是每一个Android开发者必备的技能，博主是在校大学生，自学Android一年半多，正好通过一个模拟登录校园网软件，来给大家演示如何在网页上抓取我们想要的数据，以及将数据Post给服务器。如果有什么错误或改进欢迎大家指正=-= ，如果想交流博主qq 136057505</p>
<p>好的废话不多说看一下我们的重点</p>
<ul>
<li><strong>Httpwatch等软件抓取Post请求</strong></li>
<li><strong>如何获取验证码</strong></li>
<li><p><strong>使用Jsoup解析数据</strong></p>
<p>Ok首先上项目Github网址：<a href="https://github.com/m1koo/LoginNwuWeb1.git" target="_blank" rel="external">https://github.com/m1koo/LoginNwuWeb1.git</a><br>下面是软件的截图大家心里能有项目的大体框架<br><img src="http://img.blog.csdn.net/20160412153707748" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20160412153650757" alt="这里写图片描述"></p>
</li>
</ul>
<h2 id="一、Http基础"><a href="#一、Http基础" class="headerlink" title="一、Http基础"></a>一、Http基础</h2><p>有Http基础的朋友都知道，我们是通过Get 与Post请求与服务器进行交互的，Get顾名思义就是获取信息，Post就是想服务器发请求，但是Post也可以用来获取信息并且比Get有很多优势，我们这里就是使用的Post。Java中有很多方式与服务器进行连接，常见的有HttpUrlCollection，HttpClient。两者的优缺点：</p>
<p> <strong>HttpUrlCollection优点：</strong></p>
<ul>
<li>轻量，拓展性强</li>
<li>节省资源<br><strong>缺点：</strong></li>
<li><p>代码量大复杂</p>
<p><strong>HttpClient优点：</strong></p>
</li>
<li>便捷，代码简单<br><strong>缺点：</strong><br>-拓展性不足，耗费资源多</li>
</ul>
<p>实际上在Android6.0中Google已经删除了HttpClient的API官方理由是耗电量大，但是HttpCollection的代码量实在是大，因此我们还是使用了HttpClient，只需在build.gradle中添加以下语句<br><code>android {
    useLibrary &#39;org.apache.http.legacy&#39;
}</code>即可。</p>
<h2 id="二、服务器地址的获取"><a href="#二、服务器地址的获取" class="headerlink" title="二、服务器地址的获取"></a>二、服务器地址的获取</h2><p>我们要向服务器Post数据要知道Post的地址是谁，这就要用我们的抓包软件了，博主使用的是HttpWatch与火狐的FireBug，两个软件的功能相互补充，两个软件基本的使用方法大家自行Google(百度，嘿嘿嘿=-=)<br><strong>1.验证码的地址</strong><br>ok首先打开我们的校园网登录网页：<br><a href="http://jwxt.nwu.edu.cn/%28dlxrmg55j21wlaqv2z5rcdyi%29/Default2.aspx" target="_blank" rel="external">http://jwxt.nwu.edu.cn/%28dlxrmg55j21wlaqv2z5rcdyi%29/Default2.aspx</a><br>我们点击IE 中HttpWatch Record按钮，然后刷新这个网站我们可以看到如下的界面<br><img src="http://img.blog.csdn.net/20160412164631122" alt="很多的Get请求"><br>我们能够看到很多Get请求这些Get请求就能够获取打开的界面的各个元素，右键G右方的网址，选择Open in the new Tab就可以看到各个元素，细心（累死=-=）的查找之后我们发现验证码的网址是<br><a href="http://jwxt.nwu.edu.cn/%28dlxrmg55j21wlaqv2z5rcdyi%29/CheckCode.aspx" target="_blank" rel="external">http://jwxt.nwu.edu.cn/%28dlxrmg55j21wlaqv2z5rcdyi%29/CheckCode.aspx</a> 打开后如下图显示<br><img src="http://img.blog.csdn.net/20160412165606584" alt="验证码的图片"></p>
<p><strong>2.登陆post地址</strong><br>获得验证码的地址之后，我们还要获得登陆服务器的地址，还是使用HttpWatch，我们输入进去账号密码以及验证码之后，单击登录开始抓取<img src="http://img.blog.csdn.net/20160412171947508" alt="如下图所示"><br>打开下面的POST DATA就可以看到我们发送的数据以及他们的类别<br>__VIEWSTATE<br>Button1<br>hidPdrs<br>hidsc<br>lbLanguag<br>RadioButtonLi<br>TextBox2 密码<br>txtSecretCode 验证码<br>txtUserName 用户名 <strong>这里不给用户名，有需要的QQ 加我136057505=-=</strong><br>这些值很关键，我们在这里面可以找到对应的值，如果没有值那就是空，好的这些我们下面会详细讲，我们还没有获得Post地址，右键Post这一行Copy即可，ok这样我们发送Post请求的地址就到手了。<br><a href="http://jwxt.nwu.edu.cn/%28dlxrmg55j21wlaqv2z5rcdyi%29/Default2.aspx" target="_blank" rel="external">http://jwxt.nwu.edu.cn/%28dlxrmg55j21wlaqv2z5rcdyi%29/Default2.aspx</a></p>
<h2 id="三、登陆"><a href="#三、登陆" class="headerlink" title="三、登陆"></a>三、登陆</h2><p><strong>1.验证码图片的获取</strong><br>我们有了各种地址，下面就要登陆了，但是我们知道了账号和密码（嘿嘿嘿，就不告诉你们=-=），我们还要知道验证码，怎么获得图片呢？上文中我们已经知道了验证码的地址了，我们可以Get请求，但之前也说过一般使用Post请求来进行，于是我们上代码</p>
<pre><code>  HttpPost httPost = new HttpPost(VERIFATIONURL);
                HttpClient client = new DefaultHttpClient();
                try {
                    HttpResponse httpResponse = client.execute(httPost);
                    byte[] bytes = new byte[1024];
                    bytes = EntityUtils.toByteArray(httpResponse.getEntity());
                    bmVerifation = BitmapFactory.decodeByteArray(bytes, 0, bytes.length);
                } catch (IOException e) {
                    e.printStackTrace();
                }
</code></pre><p>HttpClient的详细用法大家自行Google这里不详细展开<br>VERIFATIONURL就是上文中的验证码地址，首先创建post请求，再创建一个Httpclient ,然后是HttpResponse即响应，我们获取的服务器的返回值就在通过他获取，我们创建一个byte数组，首先将响应中获得的数据转化为byte数组，然后通过 BitmapFactory.decodeByteArray(bytes, 0, bytes.length);方法将byte数组编译为bitmap，这时候我们就获得了验证码的Bitmap了，我们能直接ImageView.SetBitmap么？当然不能，首先第一点我们在网页上获取图片是一个耗时操作，所以我们不能在主线程中进行，第二点只有在主线程中才能更新UI因此，我们使用Thread+Handler解决方法，上代码：</p>
<pre><code>private void DoGetVerifation() {

        new Thread(new Runnable() {
            @Override
            public void run() {
                HttpPost httPost = new HttpPost(VERIFATIONURL);
                HttpClient client = new DefaultHttpClient();
                try {
                    HttpResponse httpResponse = client.execute(httPost);
                    byte[] bytes = new byte[1024];
                    bytes = EntityUtils.toByteArray(httpResponse.getEntity());
                    bmVerifation = BitmapFactory.decodeByteArray(bytes, 0, bytes.length);
                } catch (IOException e) {
                    e.printStackTrace();
                }
                Message msg = new Message();
                msg.arg1 = 10;
                handler.sendMessage(msg);
            }
        }).start();
    }
</code></pre><p>主线程中接收到msg之后ivVerifation.setImageBitmap(bmVerifation);这样我们就得到了验证码的图片并且在主界面上显示出来了</p>
<p><strong>2.发送Post请求登录</strong></p>
<p>我们目前知道了用户名，密码，验证码，下一步就是要登录了，登陆同样是个耗时操作，当然也要开启一个新的线程，这没什么好说的了，我们同样是发送Post请求，上代码：</p>
<pre><code>private void DoLogin(final String user, final String password, final String verifation) {
        new Thread(new Runnable() {
            @Override
            public void run() {
                DefaultHttpClient defaultclient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(LOGINURL);
                HttpResponse httpResponse;

                //设置post参数
                List&lt;NameValuePair&gt; params = new ArrayList&lt;NameValuePair&gt;();
                params.add(new BasicNameValuePair(&quot;__VIEWSTATE&quot;, &quot;dDwyODE2NTM0OTg7Oz6ZmvWn7xzjizifHN9MgLoDNTRtjQ==&quot;));
                params.add(new BasicNameValuePair(&quot;Button1&quot;, &quot;&quot;));
                params.add(new BasicNameValuePair(&quot;hidPdrs&quot;, &quot;&quot;));
                params.add(new BasicNameValuePair(&quot;hidsc&quot;, &quot;&quot;));
                params.add(new BasicNameValuePair(&quot;lbLanguage&quot;, &quot;&quot;));
                params.add(new BasicNameValuePair(&quot;RadioButtonList1&quot;, &quot;%D1%A7%C9%FA&quot;));
                params.add(new BasicNameValuePair(&quot;TextBox2&quot;, password));
                params.add(new BasicNameValuePair(&quot;txtSecretCode&quot;, verifation));
                params.add(new BasicNameValuePair(&quot;txtUserName&quot;, user));

                //获得个人主界面的HTML
                try {
                    httpPost.setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));
                    httpResponse = defaultclient.execute(httpPost);
                    Log.i(&quot;xyz&quot;, String.valueOf(httpResponse.getStatusLine().getStatusCode()));

                    if (httpResponse.getStatusLine().getStatusCode() == 200) {
                        StringBuffer sb = new StringBuffer();
                        HttpEntity entity = httpResponse.getEntity();
                        MAINBODYHTML = EntityUtils.toString(entity);
                        IsLoginSuccessful(MAINBODYHTML);
                    }
                } catch (UnsupportedEncodingException e) {
                    e.printStackTrace();
                } catch (ClientProtocolException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }).start();
    }
</code></pre><p>首先是创建post,client response,与前面无异，我们获取数据的Post请求，比如说获取验证码请求是不需要参数的，但是我们登录需要发送给服务器 用户名 密码 验证码，于是我们为Post请求设置参数</p>
<pre><code> //设置post参数
                List&lt;NameValuePair&gt; params = new ArrayList&lt;NameValuePair&gt;();
                params.add(new BasicNameValuePair(&quot;__VIEWSTATE&quot;, &quot;dDwyODE2NTM0OTg7Oz6ZmvWn7xzjizifHN9MgLoDNTRtjQ==&quot;));
                params.add(new BasicNameValuePair(&quot;Button1&quot;, &quot;&quot;));
                params.add(new BasicNameValuePair(&quot;hidPdrs&quot;, &quot;&quot;));
                params.add(new BasicNameValuePair(&quot;hidsc&quot;, &quot;&quot;));
                params.add(new BasicNameValuePair(&quot;lbLanguage&quot;, &quot;&quot;));
                params.add(new BasicNameValuePair(&quot;RadioButtonList1&quot;, &quot;%D1%A7%C9%FA&quot;));
                params.add(new BasicNameValuePair(&quot;TextBox2&quot;, password));
                params.add(new BasicNameValuePair(&quot;txtSecretCode&quot;, verifation));
                params.add(new BasicNameValuePair(&quot;txtUserName&quot;, user));
                    //获得个人主界面的HTML
                try {
                    httpPost.setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));
                    httpResponse = defaultclient.execute(httpPost);
                    Log.i(&quot;xyz&quot;, String.valueOf(httpResponse.getStatusLine().getStatusCode()));

                    if (httpResponse.getStatusLine().getStatusCode() == 200) {
                        StringBuffer sb = new StringBuffer();
                        HttpEntity entity = httpResponse.getEntity();
                        MAINBODYHTML = EntityUtils.toString(entity);
                        IsLoginSuccessful(MAINBODYHTML);
                    }
                } catch (UnsupportedEncodingException e) {
                    e.printStackTrace();
                } catch (ClientProtocolException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
</code></pre><p>这些参数就是我们之前使用HttpWatch获取的Post data  只有类型没有值的参数我们设置为“”空，使用httpPost.setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));方法将我们设置的param 参数集合给httppost,下面和之前一样，也是通过Response获取响应值，只不过这里返回的不是图片而是赤果果的String=-=，IsLoginSuccessful这个函数是用来判断我们是否登录成功，这就要用到我们下面要说的数据解析了。</p>
<h2 id="四、数据解析"><a href="#四、数据解析" class="headerlink" title="四、数据解析"></a>四、数据解析</h2><p><strong>1.返回的响应？</strong><br>我们登陆后会得到服务器给我们的响应，我们在火狐的Firebug（HttpWatch也可以个人感觉看响应值Firebug比较方便）上机型一次成功的登陆，看一下他究竟会给我们返回什么<br>如图我们可以知道实际上响应值就是我们的网页的HTML，如果登陆成功实际上就是返回个人首页<br><img src="http://img.blog.csdn.net/20160412183423232" alt="这里写图片描述"><br>那么如果失败呢？我们模拟一次验证码错误如下图，可见同样返回一个HTML<br><img src="http://img.blog.csdn.net/20160412183828643" alt="这里写图片描述"><br>我们注意这一行</p>
<pre><code>&lt;script language=&#39;javascript&#39; defer&gt;alert(&#39;验证码不正确！！&#39;);document.getElementById(&#39;TextBox2&#39;).focus();
&lt;/script&gt;
</code></pre><p>这实际上是弹出一个窗口，提示我们验证码错误，下面我们就会利用里面不同的提示来判断我们登陆的状态</p>
<p><strong>2.使用Jsoup进行数据解析</strong><br>我们创建之前提过的IsLoginSuccessful函数</p>
<pre><code>   private void IsLoginSuccessful(String loginresult) {
        Document doc = Jsoup.parse(loginresult);
        Elements alert = doc.select(&quot;script[language]&quot;);
        Elements success = doc.select(&quot;a[href]&quot;);

        Message msg = new Message();
        //先判断是否登录成功，若成功直接退出
        for (Element link : success) {
            //获取所要查询的URL,这里对应地址按钮的名字叫成绩查询
            if (link.text().equals(&quot;等级考试查询&quot;)) {
                Log.i(&quot;xyz&quot;, &quot;登录成功&quot;);
                msg.arg1 = 6;
                handler.sendMessage(msg);
                return;
            }
        }

        for (Element link : alert) {
            //刷新验证码
            DoGetVerifation();
            //获取错误信息
            if (link.data().contains(&quot;验证码不正确&quot;)) {
                Log.i(&quot;xyz&quot;, &quot;验证码错误&quot;);
                msg.arg1 = 0;
                handler.sendMessage(msg);
            } else if (link.data().contains(&quot;用户名不能为空&quot;)) {
                Log.i(&quot;xyz&quot;, &quot;用户名不能为空&quot;);
                msg.arg1 = 1;
                handler.sendMessage(msg);
            } else if (link.data().contains(&quot;密码错误&quot;)) {
                Log.i(&quot;xyz&quot;, &quot;密码或用户名错误&quot;);
                msg.arg1 = 2;
                handler.sendMessage(msg);
            } else if (link.data().contains(&quot;密码不能为空&quot;)) {
                Log.i(&quot;xyz&quot;, &quot;密码不能为空&quot;);
                msg.arg1 = 3;
                handler.sendMessage(msg);
           ......
        }
    }
</code></pre><p>我使用的是一个开源的库Jsoup进行解析当然还有很多方法，大家自行Google(百度=-=咋老躺枪)<br><a href="http://www.open-open.com/jsoup/" target="_blank" rel="external">http://www.open-open.com/jsoup/</a>    Jsoup的中文API指南大家可以看一下<br>首先我们判断登陆成功，我们在登陆成功的HTML中找到了如下语句</p>
<pre><code>&lt;a href=&quot;xsdjkscx.aspx?xh=2014117170&amp;xm=邹德宏&amp;gnmkdm=N121606&quot; target=&#39;zhuti&#39; onclick=&quot;GetMc(&#39;等级考试查询&#39;);&quot;&gt;
等级考试查询&lt;/a&gt;
</code></pre><p>我们通过  Elements success = doc.select(“a[href]”);获取到a href”开头的数据 然后我们循环判断是否存在等级考试查询这一项，如果存在，那肯定返回的响应就是我们的个人首页了，也就是说登陆成功，我们使用Thread+Handler在主线程中Toast提醒用户<br>然后我们通过  Elements alert = doc.select(“script[language]”);获取到script 开头的语句，同样循环判断，这里要注意的是，与a href不同的是，我们要用的是link.data(),前面用的是link.text();<br>JsoupAPI 这样写的</p>
<ul>
<li>text()获取文本内容text(String value) 设置文本内容</li>
<li>data()获取数据内容（例如：script和style标签)<br>ok我们通过不同的模拟操作抓取各种错误，这里不详写</li>
</ul>
<h2 id="五、获取个人信息"><a href="#五、获取个人信息" class="headerlink" title="五、获取个人信息"></a>五、获取个人信息</h2><p>我们登录到了个人首页，我们想进一步获取自己的信息比如说四六级成绩，怎么办呢？同样还是抓取请求<br><img src="http://img.blog.csdn.net/20160412190601618" alt="这里写图片描述"><br>跟获取验证码网址的方法一样，我们得到了成绩表的网址<br><a href="http://jwxt.nwu.edu.cn/(dlxrmg55j21wlaqv2z5rcdyi)/xsdjkscx.aspx?xh=2014117170&amp;xm=邹德宏&amp;gnmkdm=N121606" target="_blank" rel="external">http://jwxt.nwu.edu.cn/(dlxrmg55j21wlaqv2z5rcdyi)/xsdjkscx.aspx?xh=2014117170&amp;xm=邹德宏&amp;gnmkdm=N121606</a><br>前面<a href="http://jwxt.nwu.edu.cn/(dlxrmg55j21wlaqv2z5rcdyi)/是我们访问的host是不变的，我们要做的就是获取xsdjkscx.aspx?xh=2014117170&amp;xm=邹德宏&amp;gnmkdm=N121606，这个问题困扰了很长时间，后来猛然发现这万至竟然在前面说的deng&#39;lu&#39;cheng&#39;登陆成功后返回的HTML中，所以还是使用Jsoup进行分析" target="_blank" rel="external">http://jwxt.nwu.edu.cn/(dlxrmg55j21wlaqv2z5rcdyi)/是我们访问的host是不变的，我们要做的就是获取xsdjkscx.aspx?xh=2014117170&amp;xm=邹德宏&amp;gnmkdm=N121606，这个问题困扰了很长时间，后来猛然发现这万至竟然在前面说的deng&#39;lu&#39;cheng&#39;登陆成功后返回的HTML中，所以还是使用Jsoup进行分析</a></p>
<pre><code> Document doc = Jsoup.parse(MAINBODYHTML);
        Elements links = doc.select(&quot;a[href]&quot;);
        StringBuffer sb = new StringBuffer();
        for (Element link : links) {
            //获取所要查询的URL,这里对应地址按钮的名字叫成绩查询
            if (link.text().equals(&quot;等级考试查询&quot;)) {
                sb.append(link.attr(&quot;href&quot;));
            }
        }
        GETSCOREURL = sb.toString();
</code></pre><p>GETSCOREURL就是我们要的后半个地址，然后我们加上前半个，进行Post请求抓取即可<br>这里返回的是一个Html的表格</p>
<pre><code>&lt;table class=&quot;datelist&quot; cellspacing=&quot;0&quot; cellpadding=&quot;3&quot; border=&quot;0&quot; id=&quot;DataGrid1&quot; width=&quot;100%&quot;
&gt;
    &lt;tr class=&quot;datelisthead&quot;&gt;
        &lt;td&gt;学年&lt;/td&gt;&lt;td&gt;学期&lt;/td&gt;&lt;td&gt;等级考试名称&lt;/td&gt;&lt;td&gt;准考证号&lt;/td&gt;&lt;td&gt;考试日期&lt;/td&gt;&lt;td&gt;成绩&lt;/td&gt;&lt;td&gt;听力成绩&lt;/td&gt;&lt;td&gt;阅读成绩&lt;/td
&gt;&lt;td&gt;写作成绩&lt;/td&gt;&lt;td&gt;综合成绩&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
        &lt;td&gt;2014-2015&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;CET4&lt;/td&gt;&lt;td&gt;610041151112625&lt;/td&gt;&lt;td&gt;201506&lt;/td&gt;&lt;td&gt;483&lt;/td&gt;&lt;td&gt;167
&lt;/td&gt;&lt;td&gt;173&lt;/td&gt;&lt;td&gt;143&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;&lt;tr class=&quot;alt&quot;&gt;
        &lt;td&gt;2015-2016&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;CET6&lt;/td&gt;&lt;td&gt;610041152209503&lt;/td&gt;&lt;td&gt;201512&lt;/td&gt;&lt;td&gt;376&lt;/td&gt;&lt;td&gt;126
&lt;/td&gt;&lt;td&gt;143&lt;/td&gt;&lt;td&gt;107&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;
</code></pre><p>同样使用Jsoup</p>
<pre><code> private void parse(String parse) {

        Document doc = Jsoup.parse(parse);
        Elements trs = doc.select(&quot;table&quot;).select(&quot;tr&quot;);
        for (int i = 0; i &lt; trs.size(); i++) {
            Elements tds = trs.get(i).select(&quot;td&quot;);
            for (int j = 0; j &lt; tds.size(); j++) {
                String text = tds.get(j).text();
                score[i][j] = text;
                Log.i(&quot;xyz&quot;, score[i][j]);
            }
        }
    }
</code></pre><p>解析完我们就得到成绩的数组了</p>
<h2 id="六、总结"><a href="#六、总结" class="headerlink" title="六、总结"></a>六、总结</h2><p>博主大二党自学Android开发1年半了，现在终于有入门的感觉了，这篇教程对新手来说坑能会有些难，但是一定要沉得住气，博主刚下载HttpWatch那一会都懵逼了，啥都不懂，慢慢摸索之后终于有了头绪，好了就这么些，邮箱交流的朋友加我QQ 136057505=-=</p>

  </div>
  <!--评论块-->
    

</article>
<nav class="post-nav">
  <!-- Prev Nav -->
    
  <a href="/2017/05/02/Java算法之-股神/" id="post_nav-newer" class="post-nav-content prev-content">
      新篇
  </a>
    


  <!-- Next Nav -->
    
</nav>
<div class="post-toc-btn"><i class="material-icons">format_list_numbered</i></div>
<div class="post-toc-none"><p>(无)</p></div>
<div class="post-toc-box">
    <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#一、Http基础"><span class="post-toc-number">1.</span> <span class="post-toc-text">一、Http基础</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#二、服务器地址的获取"><span class="post-toc-number">2.</span> <span class="post-toc-text">二、服务器地址的获取</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#三、登陆"><span class="post-toc-number">3.</span> <span class="post-toc-text">三、登陆</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#四、数据解析"><span class="post-toc-number">4.</span> <span class="post-toc-text">四、数据解析</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#五、获取个人信息"><span class="post-toc-number">5.</span> <span class="post-toc-text">五、获取个人信息</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#六、总结"><span class="post-toc-number">6.</span> <span class="post-toc-text">六、总结</span></a></li></ol>
</div>
<div class="post-back"><i class="material-icons">arrow_back</i></div>

  </div>
</div>
<div id="bottom-outer">
  <div id="bottom-inner">
    <a  id="top-button" onfocus="this.blur();"><div class="up"><i class="material-icons material-up">vertical_align_top</i></div></a>


<p >Copyright ©  2017  M1ko</p>
<p >Powered by <a href="https://hexo.io/" target="_blank"> Hexo </a> & Theme - <a href="https://github.com/moumao/hexo-theme-Vateral" target="_blank">Vateral</a></p>
<p style="font-size: 10px" id="footer-times" data-time="5/1/2017 00:00:00"></p>
<script>
    var beginTime=document.getElementById("footer-times").dataset.time
    function show_date_time(){
        var span=document.getElementById("footer-times")
        window.setTimeout("show_date_time()", 1000);
        BirthDay=new Date(beginTime);//初始日期
        today=new Date();
        timeold=(today.getTime()-BirthDay.getTime());
        sectimeold=timeold/1000
        secondsold=Math.floor(sectimeold);
        msPerDay=24*60*60*1000
        e_daysold=timeold/msPerDay
        daysold=Math.floor(e_daysold);
        e_hrsold=(e_daysold-daysold)*24;
        hrsold=Math.floor(e_hrsold);
        e_minsold=(e_hrsold-hrsold)*60;
        minsold=Math.floor((e_hrsold-hrsold)*60);
        seconds=Math.floor((e_minsold-minsold)*60);
        span.innerHTML="本站已运行"+daysold+"天"+hrsold+"小时"+minsold+"分"+seconds+"秒";
    }
    show_date_time();
</script>

  </div>
</div>

<!--影集界面需要的资源-->



<!-- scripts list from theme config.yml -->

<script src="/js/jquery-3.1.1.min.js"></script>

<script src="/js/materialize.min.js"></script>

<script src="/js/lazyload.min.js"></script>

<script src="/js/jquery.rotate.min.js"></script>

<script src="/js/Vateral.min.js"></script>




<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

</body>
</html>
